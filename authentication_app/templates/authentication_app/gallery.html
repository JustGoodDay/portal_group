<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>PicFlow</title>
<style>
body {
    margin: 0;
    font-family: sans-serif;
    display: flex;
    height: 100vh;
    background: #696969;
    color: #fff;
}

.sidebar {
    width: 80px;
    background: #808080;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 15px 0;
}

.sidebar button {
    background: none;
    border: none;
    color: white;
    font-size: 28px;
    margin: 20px 0;
    cursor: pointer;
    position: relative;
}

.sidebar button:hover::after {
    content: attr(data-tooltip);
    position: absolute;
    left: 100%;
    top: 50%;
    transform: translateY(-50%);
    background: black;
    color: white;
    padding: 5px 10px;
    border-radius: 4px;
    white-space: nowrap;
    margin-left: 10px;
    font-size: 14px;
}

.main {
    flex: 1;
    padding: 20px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.search-box {
    width: 60%;
    max-width: 600px;
    padding: 15px;
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 20px;
}

.search-box input {
    flex: 1;
    padding: 10px 15px;
    border-radius: 8px;
    border: none;
    font-size: 18px;
    background: #333;
    color: #fff;
}

.search-box button {
    padding: 10px 15px;
    border-radius: 8px;
    border: none;
    background: #555;
    color: #fff;
    font-size: 18px;
    cursor: pointer;
}

.grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 15px;
    width: 100%;
    max-width: 1200px;
}

.card {
    background: #222;
    border: 1px solid #696969;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 5px rgba(0,0,0,0.3);
}

.card img {
    width: 100%;
    display: block;
}

.card .desc {
    padding: 10px;
    font-size: 14px;
    color: #ccc;
}

.create-box {
    display: none;
    width: 60%;
    max-width: 600px;
    padding: 20px;
    background: #222;
    border-radius: 12px;
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.create-box h2 {
    text-align: center;
    margin: 0;
}

.create-box label {
    font-size: 16px;
    color: #ccc;
}

.create-box input[type="text"] {
    padding: 10px;
    border-radius: 6px;
    border: none;
    background: #333;
    color: #fff;
    font-size: 16px;
}

.photo-upload {
    margin-top: 10px;
    border: 2px dashed #696969;
    border-radius: 12px;
    height: 150px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    text-align: center;
    color: #ccc;
    position: relative;
}

.photo-upload i {
    font-size: 36px;
    margin-bottom: 10px;
    background: #555;
    border-radius: 50%;
    padding: 10px;
}

.photo-upload input[type="file"] {
    display: none;
}

.photo-upload img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
    border-radius: 8px;
}

.publish-btn {
    margin-top: 10px;
    padding: 10px 20px;
    border-radius: 8px;
    border: none;
    background: #555;
    color: #fff;
    font-size: 16px;
    cursor: pointer;
}
</style>
</head>
<body>

<div class="sidebar">
    <button id="homeBtn" data-tooltip="–ì–æ–ª–æ–≤–Ω–∞">üè†</button>
    <button id="createBtn" data-tooltip="–°—Ç–≤–æ—Ä–∏—Ç–∏">‚ûï</button>
</div>

<div class="main">
    <!-- –ü–æ–∏—Å–∫–æ–≤–∏–∫ –≤—Å–µ–≥–¥–∞ —Å–≤–µ—Ä—Ö—É -->
    <form class="search-box" id="searchBox" method="GET">
        <input type="text" name="q" placeholder="–ü–æ—à—É–∫..." />
        <button type="submit">üîç</button>
    </form>

    <!-- –ì–∞–ª–µ—Ä–µ—è -->
    <div class="grid" id="galleryGrid">
        {% for story in stories %}
        <div class="card">
            <img src="{{ story.image.url }}" alt="{{ story.title }}">
            <div class="desc"><strong>{{ story.title }}</strong><br>{{ story.description }}</div>
        </div>
        {% endfor %}
    </div>

    <!-- –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–æ—Ç–æ -->
    <form class="create-box" id="createBox" method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        <h2>–°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ñ–æ—Ç–æ</h2>

        <label>–ù–∞–∑–≤–∞</label>
        <input type="text" name="title" id="titleInput" placeholder="–î–æ–¥–∞–π—Ç–µ –Ω–∞–∑–≤—É">

        <label>–û–ø–∏—Å</label>
        <input type="text" name="description" id="descInput" placeholder="–î–æ–¥–∞–π—Ç–µ –¥–µ—Ç–∞–ª—å–Ω–∏–π –æ–ø–∏—Å">

        <div class="photo-upload" id="photoUpload">
            <i id="uploadIcon">‚¨ÜÔ∏è</i>
            <p id="uploadText">–í–∏–±–µ—Ä—ñ—Ç—å —Ñ–∞–π–ª –∞–±–æ –ø–µ—Ä–µ—Ç—è–≥–Ω—ñ—Ç—å –π–æ–≥–æ —Å—é–¥–∏</p>
            <input type="file" name="image" id="fileInput" accept="image/*">
        </div>

        <button type="submit" class="publish-btn">–û–ø—É–±–ª—ñ–∫—É–≤–∞—Ç–∏</button>
    </form>
</div>

<script>
const homeBtn = document.getElementById('homeBtn');
const createBtn = document.getElementById('createBtn');
const galleryGrid = document.getElementById('galleryGrid');
const createBox = document.getElementById('createBox');

const photoUpload = document.getElementById('photoUpload');
const fileInput = document.getElementById('fileInput');
const uploadIcon = document.getElementById('uploadIcon');
const uploadText = document.getElementById('uploadText');

// –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
homeBtn.addEventListener('click', () => {
    galleryGrid.style.display = 'grid';
    createBox.style.display = 'none';
});

createBtn.addEventListener('click', () => {
    galleryGrid.style.display = 'none';
    createBox.style.display = 'flex';
});

// –ü—Ä–µ–≤—å—é –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ñ–æ—Ç–æ
function displayImage(file) {
    const reader = new FileReader();
    reader.onload = (e) => {
        const existingImg = photoUpload.querySelector('img');
        if (existingImg) existingImg.remove();

        const img = document.createElement('img');
        img.src = e.target.result;
        photoUpload.appendChild(img);

        uploadIcon.style.display = 'none';
        uploadText.style.display = 'none';
    };
    reader.readAsDataURL(file);
}

window.addEventListener('DOMContentLoaded', () => {
    galleryGrid.style.display = 'grid';
    createBox.style.display = 'none';
});

photoUpload.addEventListener('click', () => fileInput.click());
fileInput.addEventListener('change', (e) => {
    if (e.target.files && e.target.files[0]) displayImage(e.target.files[0]);
});

photoUpload.addEventListener('dragover', (e) => e.preventDefault());
photoUpload.addEventListener('drop', (e) => {
    e.preventDefault();
    if (e.dataTransfer.files && e.dataTransfer.files[0]) displayImage(e.dataTransfer.files[0]);
});

</script>

</body>
</html>
